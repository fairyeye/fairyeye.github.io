---
title: GIT代码无法合并+本地构建成功服务器构建失败
date: 2020-04-13 09:13:28
tags: dairy
---



#### 1.GIT相关

##### 场景：
​		GIT版本出了点问题，无法正常合并代码

##### 具体描述：

​		由于误操作，导致我的本地分支和dev分支不同，在GIT上对比的时候显示无差别，但是实际上最近一次的提交是没有合并的。

​		无奈之下，我选择回滚代码。

##### 具体操作：

**第一种方法：`注意：这种方法会把之后的代码完全覆盖掉，不建议使用，除非这个分支只有你自己操作，或者你回滚的版本之后没有别的人提交`**

1. 首先要找到你要回滚的版本号。

   ​	在idea中操作：右键项目 -> Git -> Show History -> 右键提交的版本 -> Copy Revision Number。

   ​	在GIT中操作：找到提交的历史，SHA 值，即为版本号。

2. Git Bush 命令行/idea TerMinal 命令行

   ​	`git reset --hard 版本号`

**第二种方法：**

1. 找到版本号，同上。
2. 右键项目 -> Git -> Repository -> Reset HEAD
3. 在 To Commit 中输入版本号



![回滚代码](C:\Users\huapeng.zhang\AppData\Roaming\Typora\typora-user-images\image-20200414092630073.png)

##### 最后：

​		**记得一定要提交代码，即使看起来没有要 push 的东西，否则 git pull 之后等于没回滚。**



#### 2.构建相关

##### 场景：

​		回滚代码之后，本地可以成功构建，但服务器端无法正常构建。

##### 具体描述：

​		服务器端构建一直失败，好像是拉取到了错误版本的代码。

##### 具体操作：

​		暴脾气的我本来打算把项目删了重新拉一个下来，后来忍住了，在服务器端回滚了一下代码，然后手动构建了一下，居然成功了，完结。

##### 最后：

​		虽然没什么有用的东西，不过思路还是有的。

​		首先你要确认本地构建的代码是否和服务器完全相同、服务器构建的时候是否pull了最新的代码...















```
随机限定皮肤礼:0.2%;
碎月令:0.2%;
随机传说皮肤:0.5%;
随机皮肤:13.5%;
剑意(8~68个):58.5%;
皮肤碎片x8:15%;
锦鲤纳福亲密度道具x8:12.1%;

限定-288个、传说-120个、史诗-60个、勇者-40个、伴生-20个。

其中，随机限定皮肤礼的奖励概率分布为:李白-碎月剑心:1%;甄姬-幽恒:33%;后羿-辉光之辰:33%;猪八戒-猪悟能:33%;
随机皮肤的奖励概率分布为:史诗皮肤:10%，勇者皮肤:30%，伴生皮肤:60%;具体包含皮肤可见活动首页-【奖池】内信息;
剑意的奖励概率分布为:剑意x8:37.6%;剑意x18:51.3%;剑意x28:9.4%


A礼盒:0.2%; 1%：0个剑意 99%：288个剑意
B礼盒:0.2%; 498个剑意
C礼盒:0.5%;   120个剑意
D礼盒:13.5%;   10%：60个剑意，30%：40个剑意，60%：20个剑意
E礼盒(8~68个):58.5%;   37.6%：8个;51.3%:18个剑意;9.4%:28个剑意；12%:68个剑意
F礼盒（皮肤碎片）0个:15%;
G礼盒0个:12.1%;
```
