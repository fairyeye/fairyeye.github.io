---
hidden: true
title: "240720"
tags:
  - work
  - 迭代
date: 2024-06-20 11:04:51
---

### src-49440

##### 值集：  SSLM.SUPPLIER_SYNCHRONIZATION_SERVICE

增加编码：商户CA认证  MERCHANT_CA_AUTH

%% 埋点：ERP关联SRM供应商后置适配器：SSLM_MAIN_DATA_LINK_ERP_MESSAGE %%

独立脚本：SCUX_HLCX_MAINDATA_EXPORT_MERCHANT_CA

API：SCUX_HLCX_MAINDATA_EXPORT_MERCHANT_CA

适配器：SSLM_MAIN_DATA_RESULT



### src-49424

单据权限：SPFM_PARTNER_INVITES_SUPPLIER


### src-49398

适配器：SSLM_LIFE_CYCLE_STAGE_CHANGE_APPROVR_AFTER


生成ERP供应商+关联平台供应商

```java
@PostMapping("/v1/{organizationId}/external-suppliers/saveExtSupplier")

org.srm.supplier.app.service.impl.ExternalSupplierServiceImpl#saveExtSupplier
```


### src-49162

业务规则定义元数据：SCUX_CYG_AUTO_DE_INVESTG_REJECT

SCUX_CYG_AUTO_DE_EVAL_PLAN

埋点：`SSLM_INVESTIGATE_REJECT_CHECK`

埋点：`SSLM_EVAL_HEADER_REJECT`
值集：`SSLM.INVESTIGATE_TEMPLATE_ID`


### src-49025

![](https://s3.bmp.ovh/imgs/2024/06/28/b71d78b656029f16.png)



### src-49968

QB:SCUX_RECODEAL_QUERY_SUPPLY_ABILITY
独立脚本：SCUX_RECODEAL_QUERY_SUPPLY_ABILITY


### src-49395

独立脚本：`SCUX_VEVOR_SUPPLIER_FIND_COND`
值集：`SSLM.SUPPLIER_VEVOR`


### src-49263

```
#适配器：SSLM_SUPPLY_ABILITY_CHANGE_SUBMIT_SUCCESS
#适配器：SSLM_SUPPLY_ABILITY_CHANGE_SUBMIT_FUN_APPROVE
#适配器：SSLM_RECOMMEND_REQ_APPROVE_PASS_ADAPTOR
#适配器：SSLM_PREPARE_REQ_APPROVE_PASS_ADAPTOR
```


额外处理报错：no_create_because_not_auth_node_att

独立脚本+API: SCUX_EPPEN_UPDATE_SUPPLY_ABILITY_LINE

CB：SCUX_EPPEN_CODE_BLOCK_49263


```
/marmot/v1/8772/marmot-api/rfvg0KGEYbJn7Q0BiazwAicwtFl3FRffqaD1HQVGRWP6nfkahOa1JLFO8V3qq39J7L

入参
 [{
    "supplierCompanyId":"平台供应商ID",
    "itemId":"物料ID",
    "itemCategoryId":"品类ID",
    "supplyBase":"供货基地",
    "supplyFactory":"货源工厂",
    "supplyReviewStatus":"指定行状态 值集：SUPPLY_ABILITY_REVIEW_LINE_STATUS",
    "supplyFlag":"是否可供 1：可供   0：不可供",
    "freezeReason":"冻结原因",
    "thawingReason":"解冻原因"
 }]
```

### src-49385

适配器：SSLM_SUPPLY_ABILITY_CHANGE_BEFORE_SAVE
配置表：scux_srm_eppen_item_inspection_record

推荐申请单：如果是保存的时候带出
独立脚本：SCUX_EPPEN_LIFE_CYCLE_RECOMMEND_SAVE
前置API：SSLM.LIFE-CYCLE_RECOMMEND

提交也得做：
挂载API：SSLM.RECOMMEND_HEADER_FORM_SUBMIT
独立脚本：SCUX_EPPEN_LIFE_CYCLE_RECOMMEND_SUBMIT_BEFORE

codeBlock：SCUX_EPPEN_CODE_BLOCK_49385

API+独立脚本：SCUX_EPPEN_CHECK_REQ_LINE_CATEGORY

值集：SCUX.EPPEN_ABILITY_CHANGE_REQ_TYPE



### src-47353

```
1、贸易商供货能力新增/重启时，货源工厂新增一行

#适配器 供货能力申请单审批通过：SSIM_SUPPLY_ABILITY_CHANGE_COMPLETE_BEFORE
#适配器 供货能力评审通过：SSLM_ABILITY_LINE_APPROVED_AFTER
#CODEBLOCK：SCUX_EPPEN_CODE_BLOCK_47353


4、  供货能力/生命周期申请单，货源工厂必输性校验

适配器：SSLM_SUPPLY_ABILITY_CHANGE_BEFORE_SAVE

#挂载API 推荐申请单保存：SSLM.LIFE-CYCLE_RECOMMEND
#挂载API 推荐申请单提交：SSLM.RECOMMEND_HEADER_FORM_SUBMIT
#CODEBLOCK:SCUX_EPPEN_CODE_BLOCK_49385




5、  修改供货能力清单行唯一性校验 => 物料+品类+供货基地+货源工厂
#适配器：SSLM_SUPPLY_ABILITY_LINE_VALID


```

### src-50601

独立脚本：EPPEN_SUPPLY_ABILITY_REQ_SUP_SAVE_BEFORE
EPPEN_SUPPLY_ABILITY_REQ_SUP_SUBMIT_BEFORE
EPPEN_SUPPLY_ABILITY_REQ_SUBMIT_BEFORE
EPPEN_SUPPLY_ABILITY_REQ_SAVE_BEFORE

挂载API：SSLM.SUPPLY_ABILITY_REQ_SUP_SAVE
SSLM.SUPPLY_ABILITY_REQ_SUP_SUBMIT
SSLM.SUPPLY_ABILITY_REQ_SAVE
SSLM.SUPPLY_ABILITY_REQ_SUBMIT


CODEBLOCK: SCUX_EPPEN_CODE_BLOCK_50601
SCUX_EPPEN_CODE_BLOCK_49385

埋点：SSLM_SUPPLY_ABILITY_CHANGE_BEFORE_SAVE

SSLM_SUPPLY_ABILITY_CHANGE_SUBMIT_FUN_APPROVE

QUERYBLOCK：SCUX_EPPEN_QUERY_SAMPLE_REQ_50601
SCUX_EPPEN_QUERY_EVAL_REQ_50601
SCUX_EPPEN_SUPPLY_ABILITY_REQ_QUERY_STAGE

sslm_sample_send_req
sslm_site_eval_header


### src-47386


挂载API：SSLM.SUPPLY_ABILITY_REQ_SAVE
SSLM.ABILITY.SELECT_DETAIL


独立脚本：EPPEN_SUPPLY_ABILITY_REQ_SAVE_BEFORE
SCUX_EPPEN.ABILITY.SELECT_DETAIL_BEFORE






```sql
select * from hpfm_tenant where tenant_name like '%三宁%' limit 100; -- 252107

select * from sslm_external_supplier where tenant_id = 252107 and supplier_num = 'JY00001904'; -- 1088212
```



```java

// 回写供货能力行兜底逻辑



```


```
https://open-gitlab.going-link.com/operation-srm/srm-platform/-/merge_requests/12185


```



### 司顺 

API挂载：SSLM.INVESTIGATE_HEADER.APPROVE
独立脚本: VENVOR_SSLM_INVESTIGATE_HEADER_APPROVE