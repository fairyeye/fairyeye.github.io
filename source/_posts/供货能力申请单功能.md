
# 1. 新增标准表结构

```
# 供货能力申请单头表
sslm_supply_ability_change_req
# 供货能力申请单行表
sslm_supply_ability_change_line
# 供货能力申请单行附件表
sslm_supply_ability_change_att_ln
# 供货能力申请单操作记录表
sslm_supply_ability_change_record
```

# 2.表结构Groovy脚本

```groovy
# srm-resource/init-db/srm/groovy/srm_supplier
sslm_supply_ability_change_req.groovy
sslm_supply_ability_change_line.groovy
sslm_supply_ability_change_att_ln.groovy
sslm_supply_ability_change_record.groovy
```

# 3. 接口&权限

## 3.1 功能接口

### 3.1.1供货能力申请单（采）

#### A.列表页

##### 列表-整单-待提交

GET：`/v1/{organizationId}/supply-ability-change-reqs/to-submit`

##### 列表-整单-审批中

GET：`/v1/{organizationId}/supply-ability-change-reqs/to-approval`

##### 列表-整单-全部

GET：`/v1/{organizationId}/supply-ability-change-reqs/all`

##### 列表-明细-全部

POST：`/v1/{organizationId}/supply-ability-change-lines/all`

#### B.列表页按钮

##### 新建

GET 请求
`/sample-send-reqs/getUserAndUserMasterUnit`

##### 批量删除

DELETE：`/v1/{organizationId}/supply-ability-change-reqs`

传入申请单头ID数组
```json
[  
    "__-CDZ74LTm8ZzTZV1rugAUDUc-uquMzaDB5tx5SZXNkhg-__",  
    "__-CDZ74LTm8ZzTZV1rugAUDdCAl4rc5gdI1nmC-seo6fU-__",  
    "__-aeSQQzoLH_NdygOMfSEGyYEPXZb1MhNmhFMgA_V81_w-__"  
]
```


##### 批量审批


##### 导出



#### C.明细页

##### 头查询
##### 行查询

#### D.明细页按钮-头

##### 保存

POST： `/v1/{organizationId}/supply-ability-change-reqs/save`
##### 提交


##### 删除

DELETE：`/v1/{organizationId}/supply-ability-change-reqs`

传入申请单头ID数组
```json
[  
    "__-CDZ74LTm8ZzTZV1rugAUDUc-uquMzaDB5tx5SZXNkhg-__",  
    "__-CDZ74LTm8ZzTZV1rugAUDdCAl4rc5gdI1nmC-seo6fU-__",  
    "__-aeSQQzoLH_NdygOMfSEGyYEPXZb1MhNmhFMgA_V81_w-__"  
]
```


##### 操作记录



#### E.明细按钮-行

##### 新增
##### 变更已有供货能力
##### 批量删除
##### 批量编辑



## 3.3 采购方菜单权限

```
// 需要查询用户信息 把带单权限加上
/sample-send-reqs/getUserAndUserMasterUnit

## GET 
/v1/{organizationId}/supply-ability-change-reqs/to-submit
/v1/{organizationId}/supply-ability-change-reqs/to-approval
/v1/{organizationId}/supply-ability-change-reqs/all
/v1/{organizationId}/supply-ability-change-reqs/{abilityReqId}


## POST
/v1/{organizationId}/supply-ability-change-reqs/save

## DELETE 
/v1/{organizationId}/supply-ability-change-reqs
```


# 4. 配置项

## 4.1 值集

`SSLM.SUPPLY_ABILITY_REQ_STATUS`
`SSLM.INITIATE_CAMP`
`SSLM.ABILITY_OPERATION_TYPE`
## 4.2 编码规则

`SSLM.SUPPLY_ABILITY_REQ_NUM`

## 4.3 报错信息

`sslm.error.supplier_uncompleted_ability_req`
`sslm.error.company_supplier_uncompleted_ability_req`

## 4.4 业务对象

`SRM_SSLM_SUPPLY_ABILITY_CHANGE_REQ`

## 4.5 工作流

## 4.6 导出模板

## 4.7业务规则定义